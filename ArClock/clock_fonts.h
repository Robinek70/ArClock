/*
 * ArClock
 * 
 * (c) Matt Aubury 2020
 */
 
#pragma once

/*
 * Fonts for clock. Contains only digits and colons, in a simple
 * and somewhat inefficient format (but which makes it easy to
 * change character shapes within the code).
 */
struct Glyph 
{
  int width;
  uint8_t data[8];
};
  
struct Font
{
  int height;
  Glyph glyphs[15];
};

constexpr auto COLON = 10;
constexpr auto BLANK = 11; /* full-width space */
constexpr auto PERIOD = 12;
constexpr auto DEGREES = 13;
constexpr auto MINUS = 14;

/**************************************************************************/

const char *font_names[] PROGMEM =
{
  "Extra large",
  "Large",
  "Medium",
  "Small",
  "7-segment"
};

const Font fonts[] = 
{
  /*
   * Extra large
   */
  Font
  {
    8,
    {
      {
        6,
        {          
          0b011110,
          0b111111,
          0b110011,
          0b110011,
          0b110011,
          0b110011,
          0b111111,
          0b011110,
        }
      },
      {
        6,
        {          
          0b001100,
          0b011100,
          0b001100,
          0b001100,
          0b001100,
          0b001100,
          0b011110,
          0b011110,
        }
      },
      {
        6,
        {          
          0b111110,
          0b111111,
          0b000011,
          0b011111,
          0b111110,
          0b110000,
          0b111111,
          0b111111,
        }
      },
      {
        6,
        {          
          0b111110,
          0b111111,
          0b000011,
          0b011111,
          0b011111,
          0b000011,
          0b111111,
          0b111110,
        }
      },
      {
        6,
        {          
          0b110000,
          0b110000,
          0b110110,
          0b110110,
          0b111111,
          0b111111,
          0b000110,
          0b000110,
        }
      },
      {
        6,
        {          
          0b111111,
          0b111111,
          0b110000,
          0b111110,
          0b111111,
          0b000011,
          0b111111,
          0b111110,
        }
      },
      {
        6,
        {          
          0b011110,
          0b111111,
          0b110000,
          0b111110,
          0b111111,
          0b110011,
          0b111111,
          0b011110,
        }
      },
      {
        6,
        {          
          0b111111,
          0b111111,
          0b000011,
          0b000110,
          0b001100,
          0b001100,
          0b001100,
          0b001100,
        }
      },
      {
        6,
        {          
          0b011110,
          0b111111,
          0b110011,
          0b011110,
          0b111111,
          0b110011,
          0b111111,
          0b011110,
        }
      },
      {
        6,
        {          
          0b011110,
          0b111111,
          0b110011,
          0b111111,
          0b011111,
          0b000011,
          0b111111,
          0b011110,
        }
      },
      {
        2,
        {          
          0b00,
          0b11,
          0b11,
          0b00,
          0b00,
          0b11,
          0b11,
          0b00,
        }
      },
      {
        6,
        {          
          0b000000,
          0b000000,
          0b000000,
          0b000000,
          0b000000,
          0b000000,
          0b000000,
          0b000000,
        }
      },
      {
        2,
        {          
          0b00,
          0b00,
          0b00,
          0b00,
          0b00,
          0b00,
          0b11,
          0b11,
        }
      },
      {
        3,
        {          
          0b010,
          0b101,
          0b010,
          0b000,
          0b000,
          0b000,
          0b000,
          0b000,
        }
      },
      {
        3,
        {          
          0b000,
          0b000,
          0b000,
          0b111,
          0b111,
          0b000,
          0b000,
          0b000,
        }
      },
    }
  },

  /*
   * Large
   */
  Font
  {
    8,
    {
      {
        5,
        {          
          0b01110,
          0b10001,
          0b10001,
          0b10001,
          0b10001,
          0b10001,
          0b01110,
        }
      },
      {
        5,
        {          
          0b00100,
          0b01100,
          0b00100,
          0b00100,
          0b00100,
          0b00100,
          0b01110,
        }
      },
      {
        5,
        {          
          0b01110,
          0b10001,
          0b00001,
          0b01110,
          0b10000,
          0b10000,
          0b11111,
        }
      },
      {
        5,
        {          
          0b11110,
          0b00001,
          0b00001,
          0b01110,
          0b00001,
          0b00001,
          0b11110,
        }
      },
      {
        5,
        {          
          0b10000,
          0b10000,
          0b10100,
          0b10100,
          0b11111,
          0b00100,
          0b00100,
        }
      },
      {
        5,
        {          
          0b11111,
          0b10000,
          0b10000,
          0b11110,
          0b00001,
          0b00001,
          0b11110,
        }
      },
      {
        5,
        {          
          0b01110,
          0b10001,
          0b10000,
          0b11110,
          0b10001,
          0b10001,
          0b01110,
        }
      },
      {
        5,
        {          
          0b11111,
          0b00001,
          0b00010,
          0b00100,
          0b00100,
          0b00100,
          0b00100,
        }
      },
      {
        5,
        {          
          0b01110,
          0b10001,
          0b10001,
          0b01110,
          0b10001,
          0b10001,
          0b01110,
        }
      },
      {
        5,
        {          
          0b01110,
          0b10001,
          0b10001,
          0b01111,
          0b00001,
          0b10001,
          0b01110,
        }
      },
      {
        1,
        {          
          0b0,
          0b1,
          0b0,
          0b0,
          0b0,
          0b1,
          0b0,
        }
      },
      {
        5,
        {          
          0b00000,
          0b00000,
          0b00000,
          0b00000,
          0b00000,
          0b00000,
          0b00000,
        }
      },
      {
        1,
        {          
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
          0b1,
        }
      },
      {
        1,
        {          
          0b1,
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
        }
      },
      {
        3,
        {          
          0b000,
          0b000,
          0b000,
          0b111,
          0b000,
          0b000,
          0b000,
        }
      },
    }
  },

  /*
   * Medium
   */
  Font
  {
    7,
    {
      {
        4,
        {          
          0b0110,
          0b1001,
          0b1001,
          0b1001,
          0b1001,
          0b1001,
          0b0110,
        }
      },
      {
        4,
        {          
          0b0010,
          0b0110,
          0b0010,
          0b0010,
          0b0010,
          0b0010,
          0b0111,
        }
      },
      {
        4,
        {          
          0b0110,
          0b1001,
          0b0001,
          0b0010,
          0b0100,
          0b1000,
          0b1111,
        }
      },
      {
        4,
        {          
          0b1110,
          0b0001,
          0b0001,
          0b0110,
          0b0001,
          0b0001,
          0b1110,
        }
      },
      {
        4,
        {          
          0b1000,
          0b1000,
          0b1010,
          0b1010,
          0b1111,
          0b0010,
          0b0010,
        }
      },
      {
        4,
        {          
          0b1111,
          0b1000,
          0b1000,
          0b1110,
          0b0001,
          0b0001,
          0b1110,
        }
      },
      {
        4,
        {          
          0b0110,
          0b1001,
          0b1000,
          0b1110,
          0b1001,
          0b1001,
          0b0110,
        }
      },
      {
        4,
        {          
          0b1111,
          0b0001,
          0b0010,
          0b0100,
          0b0100,
          0b0100,
          0b0100,
        }
      },
      {
        4,
        {          
          0b0110,
          0b1001,
          0b1001,
          0b0110,
          0b1001,
          0b1001,
          0b0110,
        }
      },
      {
        4,
        {          
          0b0110,
          0b1001,
          0b1001,
          0b0111,
          0b0001,
          0b1001,
          0b0110,
        }
      },
      {
        1,
        {          
          0b0,
          0b1,
          0b0,
          0b0,
          0b0,
          0b1,
          0b0,
        }
      },
      {
        4,
        {          
          0b00000,
          0b00000,
          0b00000,
          0b00000,
          0b00000,
          0b00000,
          0b00000,
        }
      },
      {
        1,
        {          
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
          0b1,
        }
      },
      {
        1,
        {          
          0b1,
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
        }
      },
      {
        2,
        {          
          0b00,
          0b00,
          0b00,
          0b11,
          0b00,
          0b00,
          0b00,
        }
      },
    }
  },

  /*
   * Small
   */
  Font
  {
    5,
    {
      {
        3,
        {          
          0b111,
          0b101,
          0b101,
          0b101,
          0b111
        }
      },
      {
        3,
        {           
          0b010,
          0b010,
          0b010,
          0b010,
          0b010,
        }
      },
      {
        3,
        {           
          0b111,
          0b001,
          0b111,
          0b100,
          0b111,
        }
      },
      {
        3,
        {           
     
          0b111,
          0b001,
          0b011,
          0b001,
          0b111,
         }
      },
      {
        3,
        {                  
          0b101,
          0b101,
          0b111,
          0b001,
          0b001,
         }
      },
      {
        3,
        {                  
          0b111,
          0b100,
          0b111,
          0b001,
          0b111,
        }
      },
      {
        3,
        {           
     
          0b111,
          0b100,
          0b111,
          0b101,
          0b111,
        }
      },
      {
        3,
        {                  
          0b111,
          0b001,
          0b001,
          0b001,
          0b001,
        }
      },
      {
        3,
        {           
     
          0b111,
          0b101,
          0b111,
          0b101,
          0b111,
        }
      },
      {
        3,
        {                 
          0b111,
          0b101,
          0b111,
          0b001,
          0b111,
        }
      },
      {
        1,
        {           
          0b0,
          0b1,
          0b0,
          0b1,
          0b0,
        }
      },
      {
        3,
        {                 
          0b000,
          0b000,
          0b000,
          0b000,
          0b000,
        }
      },        
      {
        1,
        {           
          0b0,
          0b0,
          0b0,
          0b0,
          0b1,
        }
      },
      {
        1,
        {           
          0b1,
          0b0,
          0b0,
          0b0,
          0b0,
        }
      },
      {
        2,
        {           
          0b00,
          0b00,
          0b11,
          0b00,
          0b00,
        }
      },
    }
  },

  /*
   * 7-segment
   */
  Font
  {
    7,
    {
      {
        5,
        {          
          0b01110,
          0b10001,
          0b10001,
          0b00000,
          0b10001,
          0b10001,
          0b01110,
        }
      },
      {
        5,
        {          
          0b00001,
          0b00001,
          0b00001,
          0b00000,
          0b00001,
          0b00001,
          0b00001,
        }
      },
      {
        5,
        {          
          0b01110,
          0b00001,
          0b00001,
          0b01110,
          0b10000,
          0b10000,
          0b01110,
        }
      },
      {
        5,
        {          
          0b01110,
          0b00001,
          0b00001,
          0b01110,
          0b00001,
          0b00001,
          0b01110,
        }
      },
      {
        5,
        {          
          0b10001,
          0b10001,
          0b10001,
          0b01110,
          0b00001,
          0b00001,
          0b00001,
        }
      },
      {
        5,
        {          
          0b01110,
          0b10000,
          0b10000,
          0b01110,
          0b00001,
          0b00001,
          0b01110,
        }
      },
      {
        5,
        {          
          0b01110,
          0b10000,
          0b10000,
          0b01110,
          0b10001,
          0b10001,
          0b01110,
        }
      },
      {
        5,
        {          
          0b01110,
          0b00001,
          0b00001,
          0b00000,
          0b00001,
          0b00001,
          0b00001,
        }
      },
      {
        5,
        {          
          0b01110,
          0b10001,
          0b10001,
          0b01110,
          0b10001,
          0b10001,
          0b01110,
        }
      },
      {
        5,
        {          
          0b01110,
          0b10001,
          0b10001,
          0b01110,
          0b00001,
          0b00001,
          0b01110,
        }
      },
      {
        1,
        {          
          0b0,
          0b1,
          0b0,
          0b0,
          0b0,
          0b1,
          0b0
        }
      },
      {
        5,
        {          
          0b00000,
          0b00000,
          0b00000,
          0b00000,
          0b00000,
          0b00000,
          0b00000,
        }
      },
      {
        1,
        {          
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
          0b1
        }
      },
      {
        1,
        {          
          0b1,
          0b0,
          0b0,
          0b0,
          0b0,
          0b0,
          0b0
        }
      },
      {
        3,
        {          
          0b000,
          0b000,
          0b000,
          0b111,
          0b000,
          0b000,
          0b000
        }
      },
    }
  },
};

/**************************************************************************/

const Font &clock_font (const String &name)
{
  for (ssize_t i = 0; i != std::end (font_names) - std::begin (font_names); ++i)
  {
    if (name == font_names[i])
    {
      return fonts[i];
    }
  }
  return fonts[0];
}

/**************************************************************************/
